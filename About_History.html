<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="./css/bootstrap.min.css" />
    <link rel="stylesheet" href="./css/reset.css" />
    <link rel="stylesheet" href="./css/all.css" />
    <link rel="stylesheet" href="./css/bannerAnimation.css" />
    <link rel="stylesheet" href="./css/bannerAnimation-Animation.css" />
    <link rel="stylesheet" href="./css/History.css" />
    <title>聯盟大事記</title>
  </head>

  <body>
    <nav>
      <div id="navDiv"></div>
    </nav>

    <main>
      <section class="first-page bannerBox">
        <h2 class="bannerText wow">THE ABOUT</h2>
        <div class="bannerAnimationBox wow fadeIn" data-wow-duration="3s">
          <div class="animationBox" id="main-visual"></div>
        </div>
        <nav
          class="breadcrumbNav wow fadeIn"
          aria-label="breadcrumb"
          data-wow-delay="1s"
        >
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="#">首頁</a></li>
            <li class="breadcrumb-item"><a href="#">關於聯盟</a></li>
            <li class="breadcrumb-item active" aria-current="page">
              <a href="javascript:;">聯盟大事記</a>
            </li>
          </ol>
        </nav>
      </section>

      <section class="second-page">
        <div class="timeline">
          <div class="timeline__nav">
            <ul>
              <li class="active"><span>2023</span></li>
              <li><span>2022</span></li>
              <li><span>2021</span></li>
              <li><span>2020</span></li>
              <li><span>2019</span></li>
              <li><span>2018</span></li>
            </ul>
          </div>
          <div class="yearDiv" id="yearDiv">
            <div class="div-1">
              <img src="img/jpg/history/number-gray.png" alt="" />
            </div>
            <div class="div-2">
              <img src="img/jpg/history/number-gray.png" alt="" />
            </div>
            <div class="div-3">
              <img src="img/jpg/history/number.png" alt="" />
            </div>
            <div class="div-4">
              <img src="img/jpg/history/number.png" alt="" />
            </div>
          </div>
          <section class="timeline__section">
            <div class="wrapper">
              <div class="yearCard">
                <h2 class="milestone">2023</h2>
                <div class="cards">
                  <div class="month" data-wow-duration="1s">
                    <p><span>3</span>月</p>
                  </div>
                  <div class="infoDiv">
                    <div class="card">
                      <p class="date">2023.03.11</p>
                      <p>
                        3月11日至12日－北流攜手企業共同舉辦首檔自製售票演唱會《我期待
                        張雨生演唱會 致敬25》於表演廳舉辦。
                      </p>
                    </div>
                    <div class="card">
                      <p class="date">2023.03.05</p>
                      <p>「嗨！北流」表演廳開幕演唱會</p>
                    </div>
                    <div class="card">
                      <p class="date">2023.03.11</p>
                      <p>
                        3月11日至12日－北流攜手企業共同舉辦首檔自製售票演唱會《我期待
                        張雨生演唱會 致敬25》於表演廳舉辦。
                      </p>
                    </div>
                    <div class="card">
                      <p class="date">2023.03.05</p>
                      <p>「嗨！北流」表演廳開幕演唱會</p>
                    </div>
                  </div>
                </div>
                <div class="cards">
                  <div class="month" data-wow-duration="1s">
                    <p><span>1</span>月</p>
                  </div>
                  <div class="infoDiv">
                    <div class="card">
                      <p class="date">2023.01.26</p>
                      <p>
                        北流榮獲臺北市觀光遊憩續優景點「
                        2020年最佳旅遊安全獎」。
                      </p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="yearCard">
                <h2 class="milestone">2022</h2>
                <div class="cards">
                  <div class="month" data-wow-duration="1s">
                    <p><span>12</span>月</p>
                  </div>
                  <div class="infoDiv">
                    <div class="card">
                      <p class="date">2022.12.11</p>
                      <p>
                        3月11日至12日－北流攜手企業共同舉辦首檔自製售票演唱會《我期待
                        張雨生演唱會 致敬25》於表演廳舉辦。
                      </p>
                    </div>
                    <div class="card">
                      <p class="date">2023.03.05</p>
                      <p>「嗨！北流」表演廳開幕演唱會</p>
                    </div>
                  </div>
                </div>
                <div class="cards">
                  <div class="month" data-wow-duration="1s">
                    <p><span>10</span>月</p>
                  </div>
                  <div class="infoDiv">
                    <div class="card">
                      <p class="date">2022.10.26</p>
                      <p>
                        北流榮獲臺北市觀光遊憩續優景點「
                        2020年最佳旅遊安全獎」。
                      </p>
                    </div>
                  </div>
                </div>
                <div class="cards">
                  <div class="month" data-wow-duration="1s">
                    <p><span>9</span>月</p>
                  </div>
                  <div class="infoDiv">
                    <div class="card">
                      <p class="date">2022.09.11</p>
                      <p>
                        3月11日至12日－北流攜手企業共同舉辦首檔自製售票演唱會《我期待
                        張雨生演唱會 致敬25》於表演廳舉辦。
                      </p>
                    </div>
                    <div class="card">
                      <p class="date">2023.03.05</p>
                      <p>「嗨！北流」表演廳開幕演唱會</p>
                    </div>
                  </div>
                </div>
                <div class="cards">
                  <div class="month" data-wow-duration="1s">
                    <p><span>6</span>月</p>
                  </div>
                  <div class="infoDiv">
                    <div class="card">
                      <p class="date">2022.06.26</p>
                      <p>
                        北流榮獲臺北市觀光遊憩續優景點「
                        2020年最佳旅遊安全獎」。
                      </p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="yearCard">
                <h2 class="milestone">2021</h2>
                <div class="cards">
                  <div class="month" data-wow-duration="1s">
                    <p><span>3</span>月</p>
                  </div>
                  <div class="infoDiv">
                    <div class="card">
                      <p class="date">2021.03.11</p>
                      <p>
                        3月11日至12日－北流攜手企業共同舉辦首檔自製售票演唱會《我期待
                        張雨生演唱會 致敬25》於表演廳舉辦。
                      </p>
                    </div>
                    <div class="card">
                      <p class="date">2021.03.05</p>
                      <p>「嗨！北流」表演廳開幕演唱會</p>
                    </div>
                  </div>
                </div>
                <div class="cards">
                  <div class="month" data-wow-duration="1s">
                    <p><span>1</span>月</p>
                  </div>
                  <div class="infoDiv">
                    <div class="card">
                      <p class="date">2021.01.26</p>
                      <p>
                        北流榮獲臺北市觀光遊憩續優景點「
                        2020年最佳旅遊安全獎」。
                      </p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="yearCard">
                <h2 class="milestone">2020</h2>
                <div class="cards">
                  <div class="month" data-wow-duration="1s">
                    <p><span>3</span>月</p>
                  </div>
                  <div class="infoDiv">
                    <div class="card">
                      <p class="date">2020.03.11</p>
                      <p>
                        3月11日至12日－北流攜手企業共同舉辦首檔自製售票演唱會《我期待
                        張雨生演唱會 致敬25》於表演廳舉辦。
                      </p>
                    </div>
                    <div class="card">
                      <p class="date">2020.03.05</p>
                      <p>「嗨！北流」表演廳開幕演唱會</p>
                    </div>
                  </div>
                </div>
                <div class="cards">
                  <div class="month" data-wow-duration="1s">
                    <p><span>1</span>月</p>
                  </div>
                  <div class="infoDiv">
                    <div class="card">
                      <p class="date">2020.01.26</p>
                      <p>
                        北流榮獲臺北市觀光遊憩續優景點「
                        2020年最佳旅遊安全獎」。
                      </p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="yearCard">
                <h2 class="milestone">2019</h2>
                <div class="cards">
                  <div class="month" data-wow-duration="1s">
                    <p><span>3</span>月</p>
                  </div>
                  <div class="infoDiv">
                    <div class="card">
                      <p class="date">2019.03.11</p>
                      <p>
                        3月11日至12日－北流攜手企業共同舉辦首檔自製售票演唱會《我期待
                        張雨生演唱會 致敬25》於表演廳舉辦。
                      </p>
                    </div>
                    <div class="card">
                      <p class="date">2019.03.05</p>
                      <p>「嗨！北流」表演廳開幕演唱會</p>
                    </div>
                  </div>
                </div>
                <div class="cards">
                  <div class="month" data-wow-duration="1s">
                    <p><span>1</span>月</p>
                  </div>
                  <div class="infoDiv">
                    <div class="card">
                      <p class="date">2019.01.26</p>
                      <p>
                        北流榮獲臺北市觀光遊憩續優景點「
                        2020年最佳旅遊安全獎」。
                      </p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="yearCard">
                <h2 class="milestone">2018</h2>
                <div class="cards">
                  <div class="month" data-wow-duration="1s">
                    <p><span>3</span>月</p>
                  </div>
                  <div class="infoDiv">
                    <div class="card">
                      <p class="date">2018.03.11</p>
                      <p>
                        3月11日至12日－北流攜手企業共同舉辦首檔自製售票演唱會《我期待
                        張雨生演唱會 致敬25》於表演廳舉辦。
                      </p>
                    </div>
                    <div class="card">
                      <p class="date">2018.03.05</p>
                      <p>「嗨！北流」表演廳開幕演唱會</p>
                    </div>
                  </div>
                </div>
                <div class="cards">
                  <div class="month" data-wow-duration="1s">
                    <p><span>1</span>月</p>
                  </div>
                  <div class="infoDiv">
                    <div class="card">
                      <p class="date">2018.01.26</p>
                      <p>
                        北流榮獲臺北市觀光遊憩續優景點「
                        2020年最佳旅遊安全獎」。
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>
      </section>

      <div class="pianoDiv wow fadeInLeft">
        <div class="imgDiv">
          <img src="img/jpg/history/Pinao.png" alt="" />
        </div>
      </div>
    </main>

    <ul class="community">
      <li>
        <a href="javascript:;">
          <img src="./img/svg/index/line-gold.svg" class="gold" />
          <img src="./img/svg/index/line-white.svg" class="white" />
        </a>
      </li>
      <li>
        <a href="javascript:;">
          <img src="./img/svg/index/facebook-gold.svg" class="gold" />
          <img src="./img/svg/index/facebook-white.svg" class="white" />
        </a>
      </li>
      <li>
        <a href="javascript:;">
          <img src="./img/svg/index/instagram-gold.svg" class="gold" />
          <img src="./img/svg/index/instagram-white.svg" class="white" />
        </a>
      </li>
    </ul>
    <footer>
      <p>
        ©2023 Taiwan Arts Education Senior High School Alliance.
        <span class="ph"></span> All Rights Reserved.
        <span class="ph"></span>Email: art.edu.assoc@gmail.com
      </p>
    </footer>

    <script src="./js/jquery-3.5.1.min.js"></script>
    <script src="./js/bootstrap.bundle.min.js"></script>

    <script src="./js/wow.min.js"></script>
    <script src="./js/menu.js"></script>
    <script src="./js/bannerAnimation.js"></script>

    <script>
      // 初始化年度文字
      var currentYearIndex = 0; // 初始化为第一个年度
      //updateCurrentYearText(currentYearIndex);
      // wow fadeInLeft
      // wow fadeinup
      var isPc = false;

      $(document).ready(function () {
        console.log("$(window).scrollTop()" + $(window).scrollTop());
        // 其他程式碼
      });

      window.onload = () => {
        var screenWidth = screen.width;
        var screenHeight = screen.height;

        var height = $("#navDiv").height();
        $("main").css("marginTop", height);

        if (screenWidth >= 500) {
          isPc = true;
        } else {
          wow = new WOW().init();
        }

        //wow
        if (isPc) {
          wow = new WOW({
            offset: 100,
          });
          wow.init();
        } else {
          wow = new WOW().init();
        }

        //時間軸開始
        $(function () {
          //黏性導航
          var stickyTop = 0;
          var scrollTarget = false;
          var timeline = $(".timeline__nav");
          var timelineUl = $(".timeline__nav ul");
          var timeline__section = $(".timeline__section");
          var items = $("li", timeline);
          var milestones = $(".timeline__section .milestone");
          var offsetTop = parseInt(timeline.css("top"));
          var yearDiv = $(".yearDiv");

          var TIMELINE_VALUES = {
            start: 190,
            step: 50,
          };

          if (!isPc) {
            timeline.css("top", height - 5 + "px");

            var yearDivHeight =
              height - 10 + parseFloat(timeline.css("height")) + "px";

            yearDiv.css("top", yearDivHeight);

            timeline__section.css(
              "padding-top",
              parseFloat(yearDiv.css("height")) / 2 + "px"
            );
          }

          //當視窗大小調整時觸發。
          $(window)
            .resize(function () {
              timeline.removeClass("fixed");
              yearDiv.removeClass("fixed");
              stickyTop = timeline.offset().top - offsetTop;
              $(window).trigger("scroll");
            })
            .trigger("resize");

          $(window)
            .scroll(function () {
              if (isPc) {
                if ($(window).scrollTop() > stickyTop) {
                  timeline.addClass("fixed");
                } else {
                  timeline.removeClass("fixed");
                }
              }
            })
            .trigger("scroll");

          items.find("span").click(function () {
            var li = $(this).parent(),
              index = li.index(),
              milestone = milestones.eq(index);

            let activeLi = items[index];
            setYear(`${activeLi.innerText}`);

            if (!li.hasClass("active") && milestone.length) {
              scrollTarget = index;
              var scrollTargetTop = milestone.offset().top - 80;
              $("html, body").animate(
                {
                  scrollTop: scrollTargetTop,
                },
                {
                  duration: 400,
                  complete: function complete() {
                    scrollTarget = false;
                  },
                }
              );
            }
            return false;
          });

          $(window)
            .scroll(function () {
              var viewLine = $(window).scrollTop() + $(window).height() / 3;
              var active = -1;

              if (scrollTarget === false) {
                milestones.each(function () {
                  if ($(this).offset().top - viewLine > 0) {
                    return false;
                  }
                  active++;
                });
              } else {
                active = scrollTarget;
              }

              if (isPc) {
                timeline.css(
                  "top",
                  -1 * active * TIMELINE_VALUES.step +
                    TIMELINE_VALUES.start +
                    "px"
                );
              } else {
                timelineUl.css(
                  "left",
                  TIMELINE_VALUES.start -
                    1 * active * TIMELINE_VALUES.step -
                    50 +
                    "px"
                );
              }

              items.filter(".active").removeClass("active");
              items.eq(active != -1 ? active : 0).addClass("active");

              let activeLi = $("li.active", timeline);
              setYear(`${activeLi[0].innerText}`);
            })
            .trigger("scroll");
        });
      };

      //時間鐘開始

      let year1 = 0;
      let year2 = 0;
      let year3 = 0;
      let year4 = 0;

      const baseMarginTop = parseFloat($(".div-1").css("width"));
      const yearDiv1 = $(".div-1 img");
      const yearDiv2 = $(".div-2 img");
      const yearDiv3 = $(".div-3 img");
      const yearDiv4 = $(".div-4 img");

      function setYear(year) {
        var yearList = year.toString().split("");
        year1 = yearList[0];
        year2 = yearList[1];
        year3 = yearList[2];
        year4 = yearList[3];

        YearAnimation(yearDiv1, year1, 0);
        YearAnimation(yearDiv2, year2, 0);
        YearAnimation(yearDiv3, year3, 0);
        YearAnimation(yearDiv4, year4, 0);
      }

      function YearAnimation(img, finalNum, nowNumber) {
        var marginTop = -1 * finalNum * baseMarginTop;

        console.log("marginTop" + marginTop);

        img.css("margin-top", `${marginTop}px`);
        setTimeout(function () {}, 1000);
      }

      //時間鐘結束
    </script>
  </body>
</html>
